# Ensemble Methods

## Base Methods

These are some base methods used to perform operations on one or more `Ensembles`.

| Method                                                                             | Description                                                                    |
| ---------------------------------------------------------------------------------- | ------------------------------------------------------------------------------ |
| [`qp.create` {octicon}`link;0.9em`](#qp.core.factory.Factory.create)               | Creates an `Ensemble` from a dictionary of data.                               |
| [`qp.from_tables` {octicon}`link;0.9em`](#qp.core.factory.Factory.from_tables)     | Creates an `Ensemble` from a dictionary of tables.                             |
| [`qp.read_metadata` {octicon}`link;0.9em`](#qp.core.factory.Factory.read_metadata) | Reads just an `Ensemble`'s metadata from a file.                               |
| [`qp.is_qp_file` {octicon}`link;0.9em`](#qp.core.factory.Factory.is_qp_file)       | Tests if a file is a `qp` file containing a metadata table.                    |
| [`qp.read` {octicon}`link;0.9em`](#qp.core.factory.Factory.read)                   | Reads an `Ensemble` from a file.                                               |
| [`qp.data_length` {octicon}`link;0.9em`](#qp.core.factory.Factory.data_length)     | Gets the number of distributions present in the file.                          |
| [`qp.iterator` {octicon}`link;0.9em`](#qp.core.factory.Factory.iterator)           | Iterates through an `Ensemble` in a given file.                                |
| [`qp.convert` {octicon}`link;0.9em`](#qp.core.factory.Factory.convert)             | Converts an `Ensemble` to a different parameterization.                        |
| [`qp.concatenate` {octicon}`link;0.9em`](#qp.core.factory.Factory.concatenate)     | Concatenates a list of `Ensembles` with the same metadata into one `Ensemble`. |
| [`qp.write_dict` {octicon}`link;0.9em`](#qp.core.factory.Factory.write_dict)       | Writes a dictionary of `Ensembles` to an HDF5 file.                            |
| [`qp.read_dict` {octicon}`link;0.9em`](#qp.core.factory.Factory.read_dict)         | Reads a dictionary of `Ensembles` from an HDF5 file.                           |
| [`qp.add_class` {octicon}`link;0.9em`](#qp.core.factory.Factory.add_class)         | Adds a new parameterization class to the dictionary of classes.                |

## Methods of the `Ensemble` class

### General use methods

These are more methods that are used to perform operations on `Ensembles`, from creating them to writing them to file. These are methods of an existing `Ensemble`, and so you would write `ens.set_ancil(ancil)`, for example.

| Method &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | Description                                                                                                                   |
| --------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| [`set_ancil` {octicon}`link;0.9em`](#qp.Ensemble.set_ancil)                                                     | Set the ancillary data dictionary.                                                                                            |
| [`add_to_ancil` {octicon}`link;0.9em`](#qp.Ensemble.add_to_ancil)                                               | Add columns to the ancillary data dictionary.                                                                                 |
| [`convert_to` {octicon}`link;0.9em`](#qp.Ensemble.convert_to)                                                   | Convert Ensemble to another parameterization                                                                                  |
| [`append` {octicon}`link;0.9em`](#qp.Ensemble.append)                                                           | Appends another Ensemble to the current one.                                                                                  |
| [`update` {octicon}`link;0.9em`](#qp.Ensemble.update)                                                           | Re-create the Ensemble with new objdata and metadata, optionally ancillary data.                                              |
| [`update_objdata` {octicon}`link;0.9em`](#qp.Ensemble.update_objdata)                                           | Re-create the Ensemble with the given objdata and optionally ancillary data.                                                  |
| [`build_tables` {octicon}`link;0.9em`](#qp.Ensemble.build_tables)                                               | Returns a dictionary of the metadata, objdata and ancillary data dictionaries, with conversion necessary for writing to file. |
| [`write_to` {octicon}`link;0.9em`](#qp.Ensemble.write_to)                                                       | Write the Ensemble to a `tables_io` compatible file.                                                                          |
| [`initializeHdf5Write` {octicon}`link;0.9em`](#qp.Ensemble.initializeHdf5Write)                                 | Sets up an HDF5 file that can be written to iteratively.                                                                      |
| [`writeHdf5Chunk` {octicon}`link;0.9em`](#qp.Ensemble.writeHdf5Chunk)                                           | Write a chunk of the Ensemble objdata and ancillary data to the HDF5 file.                                                    |
| [`finalizeHdf5Write` {octicon}`link;0.9em`](#qp.Ensemble.finalizeHdf5Write)                                     | Write Ensemble metadata to the output HDF5 file and close it.                                                                 |
| [`x_samples` {octicon}`link;0.9em`](#qp.Ensemble.x_samples)                                                     | Returns an array of x values that can be used to plot all the distributions in the Ensemble.                                  |
| [`plot` {octicon}`link;0.9em`](#qp.Ensemble.plot)                                                               | Plots the selected distribution as a curve and returns the figure axes.                                                       |
| [`plot_native` {octicon}`link;0.9em`](#qp.Ensemble.plot_native)                                                 | Plots the selected distribution as the default for that parameterization and returns the figure axes.                         |

### Statistics Methods

Many of these methods are inherited from [`scipy.stats.rv_continuous`](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.html#scipy.stats.rv_continuous). Some of these methods, such as `pdf()`, inherit from the SciPy method, but may have parameterization-specific functions to calculate the values. Others are inherited more directly.

| Method                                                                | Description                                                                                                                                                                                                                                           |
| --------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [`norm` {octicon}`link;0.9em`](#qp.Ensemble.norm)                     | Normalize the distributions in the Ensemble                                                                                                                                                                                                           |
| [`pdf` {octicon}`link;0.9em`](#qp.Ensemble.pdf)                       | Returns the value of the probability density function (PDF) for each distribution at the given location(s) (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.pdf.html#scipy.stats.rv_continuous.pdf)). |
| [`gridded` {octicon}`link;0.9em`](#qp.Ensemble.gridded)               | Return and cache the PDF values at the given grid points.                                                                                                                                                                                             |
| [`logpdf` {octicon}`link;0.9em`](#qp.Ensemble.logpdf)                 | Returns the log of the PDF for each distribution in the given location(s) (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.logpdf.html#scipy.stats.rv_continuous.logpdf)).                            |
| [`cdf` {octicon}`link;0.9em`](#qp.Ensemble.cdf)                       | Returns the cumulative distribution function (CDF) for each distribution in the given location(s) (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.cdf.html#scipy.stats.rv_continuous.cdf)).          |
| [`logcdf` {octicon}`link;0.9em`](#qp.Ensemble.logcdf)                 | Returns the log of the CDF for each distribution in the given location(s) (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.logcdf.html#scipy.stats.rv_continuous.logcdf)).                            |
| [`ppf` {octicon}`link;0.9em`](#qp.Ensemble.ppf)                       | Returns the percentage point function (PPF) for each distribution in the given location(s) (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.ppf.html#scipy.stats.rv_continuous.ppf)).                 |
| [`sf` {octicon}`link;0.9em`](#qp.Ensemble.sf)                         | Returns the survival fraction (SF) for each distribution in the given location(s) (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.sf.html#scipy.stats.rv_continuous.sf)).                            |
| [`logsf` {octicon}`link;0.9em`](#qp.Ensemble.logsf)                   | Returns the log of the SF for each distribution in the given location(s) (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.logsf.html#scipy.stats.rv_continuous.logsf)).                               |
| [`isf` {octicon}`link;0.9em`](#qp.Ensemble.isf)                       | Returns the inverse of the SF for each distribution in the given location(s) (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.isf.html#scipy.stats.rv_continuous.isf)).                               |
| [`rvs` {octicon}`link;0.9em`](#qp.Ensemble.rvs)                       | Generate n samples from each distribution (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.rvs.html#scipy.stats.rv_continuous.rvs)).                                                                  |
| [`stats` {octicon}`link;0.9em`](#qp.Ensemble.stats)                   | Returns some statistical moments for each of the distributions (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.stats.html#scipy.stats.rv_continuous.stats)).                                         |
| [`mode` {octicon}`link;0.9em`](#qp.Ensemble.mode)                     | Return the mode of each of the distributions, evaluated on the given or cached grid points.                                                                                                                                                           |
| [`median` {octicon}`link;0.9em`](#qp.Ensemble.median)                 | Return the median of each of the distributions (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.median.html#scipy.stats.rv_continuous.median)).                                                       |
| [`mean` {octicon}`link;0.9em`](#qp.Ensemble.mean)                     | Return the means of each of the distributions (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.mean.html#scipy.stats.rv_continuous.mean)).                                                            |
| [`var` {octicon}`link;0.9em`](#qp.Ensemble.var)                       | Returns the variances for each of the distributions (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.var.html#scipy.stats.rv_continuous.var)).                                                        |
| [`std` {octicon}`link;0.9em`](#qp.Ensemble.std)                       | Returns the standard deviations of each of the distributions (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.std.html#scipy.stats.rv_continuous.std)).                                               |
| [`moment` {octicon}`link;0.9em`](#qp.Ensemble.moment)                 | Returns the nth moment for each of the distributions (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.moment.html#scipy.stats.rv_continuous.moment)).                                                 |
| [`entropy` {octicon}`link;0.9em`](#qp.Ensemble.entropy)               | Returns the differential entropy for each of the distributions (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.entropy.html#scipy.stats.rv_continuous.entropy)).                                     |
| [`interval` {octicon}`link;0.9em`](#qp.Ensemble.interval)             | Returns the intervals corresponding to a confidence level of alpha for each of the distributions (see also [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.interval.html#scipy.stats.rv_continuous.interval)). |
| [`histogramize` {octicon}`link;0.9em`](#qp.Ensemble.histogramize)     | Returns integrated histogram bin values for each of the distributions.                                                                                                                                                                                |
| [`integrate` {octicon}`link;0.9em`](#qp.Ensemble.integrate)           | Returns the integral under the PDFs between the given limits for each of the distributions.                                                                                                                                                           |
| [`moment_partial` {octicon}`link;0.9em`](#qp.Ensemble.moment_partial) | Returns the nth moment over a given range for each of the distributions.                                                                                                                                                                              |
